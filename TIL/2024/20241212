Item76. 가능한 한 실패 원자적으로 만들라

실패원자적: 호출된 메서드가 실패하더라도 해당 객체는 메서드 호출 전 상태를 유지해야 한다.

메서드를 실패 원자적으로 만드는 방법
1. 불변 객체로 설계
2. 작업 수행에 앞서 매개변수의 유효성을 검사
3. 객체의 임시 복사본으로 유지
4. 작업 도중 발생하는 실패를 가로채는 복구 코드를 작성하여 작업 전 상태로 되돌리는 방법

실패 원자성은 항상 권장되지만 항상 달성할 수 있는 것은 아님
예를 들어 두 쓰레드가 동기화 없이 같은 객체에 접근하여 수정한다면 그 객체의 일관성이 깨질 수 있음 
따라서 ConcurrentModificationException을 잡아냈다고 해서 그 객체가 여전히 쓸 수 있는 상태라고 가정해서는 안됨
복잡도가 높으면 비용이 많이 발생하니 트레이드오프를 따져보기
